# 저장 장치

## HDD

데이터를 자기 정보로 변환하여 Platter라는 자기 장치에 기록하는 저장 장치

데이터 단위: 1 Sector = 512 byte or 4MB

### HDD 데이터 전송 흐름

1. 디바이스 드라이버가 데이터의 읽고 쓰기에 필요한 정보를 HDD에 전달(섹터 번호, 섹터 갯수, 종류)
2. 스윙 암을 이동 시키거나 플래터를 회전시켜 접근하고자 하는 섹터 위에 자기 헤드를 위치
3. 데이터 읽기/쓰기
4. 읽을 경우에는 HDD 읽기 처리가 완료됨

- 스윙 암 동작과 Platter 회전은 기계적 처리로 HDD에 접근하는 레이턴시는 하드웨어의 처리 속도에 따라 영향을 받게 됨.
- 이러한 특성으로 파일 시스템은 각 파일의 데이터를 되도록 연속된 영역에 배치되도록 함

#### 프로그램 작성 시 고려할 점

- 파일 내 데이터를 연속/가까운 영역에 배치
- 연속된 영역에 접근 시에 여러 번 나누기보다 한번에 처리
- 파일은 되도록 큰 사이즈로 시퀀셜Sequential하게 접근

### 블록 장치 계층

리눅스에서는 HDD나 SSD 등의 랜덤 접근이 가능하며 일정 단위로 접근 가능한 장치를 합쳐 블록 장치로 분류

디바이스 파일이라고 불리는 특수한 파일을 가지고 직접 접근 또는 그 위에 구축된 파일 시스템을 통해서 간접적으로 접근

각종 블록 장치에는 공통된 처리가 많기 때문에 이러한 처리는 각가의 장치에 대한 디바이스 드라이버에서 구현하지 않고 커널의 블록 장치 계층이라는 곳에서 담당

#### I/O 스케줄러

블록 장치 계층의 I/O 스케줄러는 Merge와 Sort를 통한 I/O성능 향상을 목표로 함

Merge: 연속된 섹터에 대한 I/O 요청 병합
Sort: 여러 개의 불연속 섹터에 대한 I/O 요청을 섹터 번호 순으로 정렬

#### 미리 읽기Read Ahead

저장 장치 안에 있는 영역에 접근한 다음 바로 뒤 연속되는 영역에 접근할 가능성이 매우 크다는 점을 예측하여 미리 읽어두는 기능

## SSD

데이터 접근이 HDD와는 다르게 전기적 동작만으로 이루어짐